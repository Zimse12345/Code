# 2022-10-08 OI笔记

### CF793F Julia the snail

题意简述: 有一个长度为 $n$ 的杆,上面有 $m$ 条绳子,第 $i$ 条绳子可以让蜗牛从 $l_i$ 爬到 $r_i$ (中途不能停止),蜗牛也可以自由下落, $q$ 次询问蜗牛从 $x$ 出发,途中高度不能低于 $x$ 或高于 $y$ ,问能爬到的最高高度, $n,m,q \le 10^5$

考虑枚举右端点,把绳子和询问按 $r$ 排序,然后依次扩展 $r$ 的限制,然后就解决了 $r$ 的限制

如果蜗牛可以从 $a$ 走到 $b$ ,那么在杆上 $a$ 到 $b$ 这个范围都应该被绳子覆盖,这个可以用线段树二分找到 $[x,y]$ 内第一个没覆盖到的位置,但是注意到不可以使用左端点低于 $l$ 的绳子,我们在线段树上维护能到达这个位置的 $l_i$ 最大的绳子(如果没有那就是 $0$ )的左端点位置,每次加入一条线段 $[l_i,r_i]$ 时将线段树 $[l_i,r_i-1]$ 这个区间对 $l_i$ 取 $\max$ ,然后维护区间最小值,线段树二分找到 $[x,y]$ 中最靠左的小于 $x$ 的位置即可

